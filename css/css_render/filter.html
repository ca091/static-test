<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="css3滤镜--灰度、深褐色、饱和度、色调旋转...">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>css3滤镜,可继承;作用于img、background、border等</title>
  <style>
    :root {
      --bgTip: #ccc;
    }
    /*网页整体过滤*/
    main {
      /*filter: grayscale(30%);*/
    }
    .slider {
      display: inline-block;
      width: 400px;
      margin-bottom: 16px;
    }

    .f-drop-shadow {
      filter: drop-shadow(3px 3px 3px cadetblue);
    }

    .multi-border {
      width: 200px;
      height: 200px;
      padding: 30px;
      background-color: lightcyan;
      text-align: center;
      border: 5px solid blue;
      box-shadow: 0 0 0 5px orange inset,
        0 0 0 10px lightblue inset,
        0 0 0 15px red inset;
    }

    .box {
      margin: 40px;
      padding: 50px;
      background-color: var(--bgTip);
      position: relative;
    }

    .cor {
      position: absolute;
      left: -40px;
      overflow: hidden;
      border: 20px solid transparent;
      border-right-color: var(--bgTip);
    }

    .box-shadow {
      box-shadow: 5px 5px 10px black;
    }

    .drop-shadow {
      filter: drop-shadow(5px 5px 10px black);
    }

    .icon {
      display: inline-block;
      width: 20px;
      height: 20px;
      overflow: hidden;
    }

    .icon-del {
      background: url(../../asset/image/skull.png) center / contain no-repeat;
    }

    .icon > .icon {
      position: relative;
      left: -20px;
      border-right: 20px solid transparent;
      -webkit-filter: drop-shadow(20px 0 0 red);
      filter: drop-shadow(20px 0 0 red);
    }

    .box2 {
      width: 400px;
      height: 300px;
      background: url("../../asset/image/pencil.jpg") no-repeat;
      background-size: cover;
    }

    @keyframes hueRotate {
      from {
        filter: hue-rotate(0deg);
      }
      to {
        filter: hue-rotate(360deg);
      }
    }

    .hue-rotate {
      animation: hueRotate 6s linear 0s infinite;
    }

    .btn {
      min-width: 50px;
      padding: 9px 15px;
      line-height: 20px;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
      transition: border-color .15s, background-color .15s, opacity .15s;

      /*.btn-primary*/
      border: 1px solid #2486ff;
      background-color: #2486ff;
      color: #fff;
    }

    .btn:hover {
      border-color: #0160d5;
      background-color: #0160d5;
    }

    .btn:active {
      border-color: #0057c3;
      background-color: #0057c3;
    }

    .btn-primary {
      filter: hue-rotate(0deg);
    }

    .btn-warning {
      filter: hue-rotate(120deg);
    }

    .btn-info {
      filter: hue-rotate(240deg);
    }
  </style>
</head>
<body>
<main>
  <section>
    <h4>原始图像</h4>
    <div>
      <img src="../../asset/image/pencil.jpg" alt="">
    </div>
  </section>

  <section>
    <h4>灰度 filter: grayscale(50%);</h4>
    <input type="range" min="0" max="100" value="50" class="slider" oninput="handleRangeChange(event, '.f-grayscale')">
    <div class="f-grayscale" style="filter: grayscale(50%);">
      <img src="../../asset/image/pencil.jpg" alt="">
    </div>
  </section>

  <section>
    <h4>深褐色 filter: sepia(80%);</h4>
    <input type="range" min="0" max="100" value="80" class="slider" oninput="handleRangeChange(event, '.f-sepia')">
    <div class="box2 f-sepia" style="filter: sepia(80%);">
      use bg
    </div>
  </section>

  <section>
    <h4>饱和度 filter: saturate(200%);</h4>
    <input type="range" min="0" max="500" value="200" class="slider" oninput="handleRangeChange(event, '.f-saturate')">
    <div class="f-saturate" style="filter: saturate(200%);">
      <img src="../../asset/image/pencil.jpg" alt="">
    </div>
  </section>

  <section>
    <h4>色调旋转(所有颜色都会在色盘上移动相同的“角度”) filter: hue-rotate(120deg);</h4>
    <input type="range" min="0" max="360" value="120" class="slider" oninput="handleRangeChange(event, '.f-hue-rotate', 'deg')">
    <div class="f-hue-rotate hue-rotate" style="filter: hue-rotate(120deg);">
      <img src="../../asset/image/pencil.jpg" alt="">
    </div>
  </section>

  <section>
    <h4>颜色反转 filter: invert(100%);</h4>
    <input type="range" min="0" max="100" value="100" class="slider" oninput="handleRangeChange(event, '.f-invert')">
    <div class="f-invert" style="filter: invert(100%);">
      <img src="../../asset/image/pencil.jpg" alt="">
    </div>
  </section>

  <section>
    <h4>透明度 filter: opacity(50%);</h4>
    <input type="range" min="0" max="100" value="50" class="slider" oninput="handleRangeChange(event, '.f-opacity')">
    <div class="f-opacity" style="filter: opacity(50%);">
      <img src="../../asset/image/pencil.jpg" alt="">
    </div>
  </section>

  <section>
    <h4>亮度 filter: brightness(130%);</h4>
    <input type="range" min="0" max="500" value="130" class="slider" oninput="handleRangeChange(event, '.f-brightness')">
    <div class="f-brightness" style="filter: brightness(130%);">
      <img src="../../asset/image/pencil.jpg" alt="">
    </div>
  </section>

  <section>
    <h4>对比度(adjust the difference between the darkest and lightest) filter: contrast(200%);</h4>
    <input type="range" min="0" max="500" value="200" class="slider" oninput="handleRangeChange(event, '.f-contrast')">
    <div class="f-contrast" style="filter: contrast(200%);">
      <img src="../../asset/image/pencil.jpg" alt="">
    </div>
  </section>

  <section>
    <h4>模糊(半径越大，渲染越耗时) filter: blur(5px);</h4>
    <input type="range" min="0" max="10" value="5" class="slider" oninput="handleRangeChange(event, '.f-blur', 'px')">
    <div class="f-blur" style="filter: blur(5px);">
      <img src="../../asset/image/pencil.jpg" alt="">
    </div>
  </section>

  <section>
    <h4>阴影(模糊半径越大，渲染越耗时) filter: drop-shadow(3px 3px 3px cadetblue);</h4>
    <div class="f-drop-shadow">
      <img src="../../asset/image/pencil.jpg" alt="">
    </div>
  </section>

  <section>
    <h4>box shadow</h4>

    <div class="multi-border">box</div>

    <div class="box box-shadow">
      <i class="cor"></i>
      box-shadow: 5px 5px 10px black;
    </div>

    <div class="box drop-shadow">
      <i class="cor"></i>
      filter: drop-shadow(5px 5px 10px black)
    </div>
  </section>

  <section>
    <h4>change icon color，不兼容safari</h4>

    <div>
      <p><strong>原始图标</strong></p>
      <i class="icon icon-del"></i>
      <img src="../../asset/image/skull.png" alt="">
    </div>

    <div>
      <p><strong>可变色图标</strong></p>
      <i class="icon">
        <i class="icon icon-del"></i>
      </i>
    </div>
  </section>
</main>

<section>
  <h4>filter实现多色按钮</h4>
  <div class="btns">
    <button class="btn btn-primary">可以瞎点</button>
    <button class="btn btn-warning">别瞎点</button>
    <button class="btn btn-info">没事就点</button>
  </div>
</section>

<script src="../../asset/js/utils.js"></script>
<script>
  let el_btns = document.querySelector('.btns')

  function createBtn(hueRotate) {
    let el_btn = document.createElement('button')
    el_btn.textContent = `hueRotate-${hueRotate}`
    el_btn.className = 'btn'
    el_btn.style.filter = `hue-rotate(${hueRotate}deg)`
    el_btns.appendChild(el_btn)
  }

  //批量生成按钮
  let btn_count = new Array(18)
  for (let [index, item] of btn_count.entries()) {
    createBtn(index * 20)
  }

  let handleRangeChange = throttle(function ($event, selector, unit = '%') {
    console.log($event.target.value, selector)
    $(selector).style.filter = `${[selector.slice(3)]}(${$event.target.value}${unit})`
  }, 800)
</script>
</body>
</html>
